function sendQuery(){var e="query"+threadCount,t=$(".result-filter"),a=$(".result-filter").serialize();gThreadKey=e,threadCount++,$(".loading_progress").show(),$(".inner.result").hide(),$.ajax({url:t.attr("action"),type:t.attr("method"),data:a,success:function(t){e==gThreadKey&&($(".loading_progress").hide(),$(".recipes").empty().append($(t).find(".inner.result")))}})}function toggleInput(e,t){var a=e.parent("label").parent("li");t?a.addClass("checked"):a.removeClass("checked")}function toggleCheckbox(e,t){e.parent("label").parent("li");t?e.prop("checked",!0):e.prop("checked",!1)}function toggleTag(e,t){var a=!1,l=e.attr("cat-level"),c=e.attr("cat-name"),i=e.val(),n="parent"==l?" \uc804\uccb4":"";$("#cat-result span").each(function(){$(this).attr("cat-id")==i&&(a=!0)}),t?a||$("#cat-result").append($('<span class="added-cat" cat-level="'+l+'" cat-id="'+i+'">'+c+n+'<a href="javascript:;" class="btn_cancel">\uc120\ud0dd\ucde8\uc18c</a></span>')):$("#cat-result").find("span[cat-id="+i+"]").remove()}function toggleTimeTag(e){var t=e.val(),a=$(".time-cat");0!=a.length&&a.remove(),""!=t&&$("#cat-result").append($('<span class="time-cat">'+t+(null!=to_min?to_min:"\ubd84 \uc774\ub0b4")+'<a href="javascript:;" class="btn_cancel">\uc120\ud0dd\ucde8\uc18c</a></span>'))}function toggleDifficultyTag(e){var t=e.val(),a="",l=$(".diff-cat");switch(t){case"\ud558":a=easy_food;break;case"\uc911":a=medium_food;break;case"\uc0c1":a=hard_food}0!=l.length&&l.remove(),""!=a&&$("#cat-result").append($('<span class="diff-cat">'+a+'<a href="javascript:;" class="btn_cancel">\uc120\ud0dd\ucde8\uc18c</a></span>'))}function toggleHealthyTag(e){var t=e.val(),a=$(".healthy-cat");0!=a.length&&a.remove(),""!=t&&$("#cat-result").append($('<span class="healthy-cat">'+t+'<a href="javascript:;" class="btn_cancel">\uc120\ud0dd\ucde8\uc18c</a></span>'))}$(document).ready(function(){var e=$("#amount"),t=$("#filter-time"),a=$(".ui_slider");""!=t.val()?(cooking_time=t.val(),"135"==cooking_time?e.val(null!=all_time?all_time:"\ubaa8\ub4e0 \uc2dc\uac04"):(e.val(cooking_time+(null!=to_min?to_min:"\ubd84 \uc774\ub0b4")),a.slider("value",cooking_time))):(a.slider("value",135),e.val(null!=all_time?all_time:"\ubaa8\ub4e0 \uc2dc\uac04"))}),$(".ui_slider").slider({range:"min",value:135,min:15,max:135,step:15,slide:function(e,t){135==t.value?($("#filter-time").val(""),$("#amount").val(null!=all_time?all_time:"\ubaa8\ub4e0 \uc2dc\uac04")):($("#filter-time").val(t.value),$("#amount").val(t.value+(null!=to_min?to_min:"\ubd84 \uc774\ub0b4")))},stop:function(){toggleTimeTag($("#filter-time")),sendQuery()}}),$(".lst_check").on("click",".arrow-toggle",function(){$parent=$(this).parent("label").parent("li"),$children=$parent.find(".small_lst_check"),$children.removeClass("hide show").addClass($(this).hasClass("show-children")?"show":"hide"),$(this).toggleClass("show-children hide-children")}),$(".lst_check").on("click","input:checkbox",function(){var e=$(this),t=$(this).parent("label").parent("li");if($(this).hasClass("depth_one"))$children=t.find(".small_lst_check"),t.hasClass("checked")?(toggleInput(e,!1),toggleTag(e,!1),toggleCheckbox(e,!1),$children.find("li").each(function(){$checkbox=$(this).find("input:checkbox"),toggleInput($checkbox,!1),toggleTag($checkbox,!1),toggleCheckbox($checkbox,!1)})):(toggleInput(e,!0),toggleTag(e,!0),toggleCheckbox(e,!0),$children.find("li").each(function(){$checkbox=$(this).find("input:checkbox"),toggleInput($checkbox,!0),toggleTag($checkbox,!1),toggleCheckbox($checkbox,!1)}),$children.removeClass("show hide").addClass("show"),e.siblings(".arrow-toggle").removeClass("show-children hide-children").addClass("hide-children"));else{var a=!0;$parent=t.parent().parent(),$parent_input=$parent.find("input.depth_one:checkbox"),t.hasClass("checked")?(toggleInput(e,!1),toggleTag(e,!1),toggleCheckbox(e,!1),toggleInput($parent_input,!1),toggleTag($parent_input,!1),toggleCheckbox($parent_input,!1),t.siblings("li").each(function(){$checkbox=$(this).find("input:checkbox"),$(this).hasClass("checked")?(toggleTag($checkbox,!0),toggleCheckbox($checkbox,!0)):(toggleTag($checkbox,!1),toggleCheckbox($checkbox,!1))})):(toggleInput(e,!0),toggleCheckbox(e,!0),t.siblings("li").each(function(){$(this).hasClass("checked")||(a=!1)}),a?(toggleInput($parent_input,!0),toggleTag($parent_input,!0),toggleCheckbox($parent_input,!0),t.parent().find("li").each(function(){$checkbox=$(this).find("input:checkbox"),toggleTag($checkbox,!1),toggleCheckbox($checkbox,!1)})):(toggleInput($parent_input,!1),toggleTag($parent_input,!1),toggleCheckbox($parent_input,!1),t.parent().find("li").each(function(){$checkbox=$(this).find("input:checkbox"),$(this).hasClass("checked")?(toggleTag($checkbox,!0),toggleCheckbox($checkbox,!0)):(toggleTag($checkbox,!1),toggleCheckbox($checkbox,!1))})))}sendQuery()}),$("#cat-result").on("click",".btn_cancel",function(){var e=$(this).parent();if(e.hasClass("time-cat"))$("#filter-time").val(""),$(".ui_slider").slider("value",135),$("#amount").val(null!=all_time?all_time:"\ubaa8\ub4e0 \uc2dc\uac04");else if(e.hasClass("diff-cat"))$("#filter-diff").val(""),$(".difficulty li").each(function(){$(this).find("a.option").removeClass("checked")});else if(e.hasClass("healthy-cat"))$("#filter-healthy").val(""),$(".healthy li").each(function(){$(this).find("a.option").removeClass("checked")});else if(e.hasClass("basefood-cat"))foodId=e.attr("basefood-id"),$(".filter-basefood[value="+foodId+"]").remove();else if(e.hasClass("keyword-cat"))$("#filter-search").val("");else{var t=e.attr("cat-id"),a=e.attr("cat-level"),l=$(".finder").find("input:checkbox[value="+t+"]");toggleInput(l,!1),toggleCheckbox(l,!1),"parent"==a&&($selectedChildren=l.parent().siblings(".small_lst_check"),$selectedChildren.find("li").each(function(){$checkbox=$(this).find("input:checkbox"),toggleInput($checkbox,!1),toggleCheckbox($checkbox,!1)}))}e.remove(),sendQuery()}),$(".difficulty").on("click",".option",function(){var e=$(this).parent(),t=$("#filter-diff"),a=$(this).attr("data-val");$(this).hasClass("checked")?($(this).removeClass("checked"),t.val("")):($(this).addClass("checked"),e.siblings("li").each(function(){$(this).find("a.option").removeClass("checked")}),t.val(a)),toggleDifficultyTag(t),sendQuery()}),$(".healthy").on("click",".option",function(){var e=$(this).parent(),t=$("#filter-healthy"),a=$(this).attr("data-val");$(this).hasClass("checked")?($(this).removeClass("checked"),t.val("")):($(this).addClass("checked"),e.siblings("li").each(function(){$(this).find("a.option").removeClass("checked")}),t.val(a)),toggleHealthyTag(t),sendQuery()}),$(".sec_finder").on("change",".sort-selector",function(){var e=$(this).val();$("#filter-sort").val(e),sendQuery()});var gThreadKey="",threadCount=0;